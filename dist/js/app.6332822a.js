(function(){"use strict";var e={391:function(e,t,n){var a=n(963),s=n(252),o=n.p+"img/bg.ec634baf.jpg";const r={class:"container"},l={class:"columns"},i={class:"column"},u=(0,s._)("div",{class:"column is-one-third is-hidden-touch"},[(0,s._)("img",{src:o,alt:"Petanque in Alps",class:"image"})],-1),m=(0,s._)("hr",null,null,-1);function c(e,t,n,a,o,c){const d=(0,s.up)("Navbar"),h=(0,s.up)("Tournament"),p=(0,s.up)("Message"),g=(0,s.up)("Menu"),_=(0,s.up)("SavedTournamentModal"),f=(0,s.up)("Help");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(d,{onOpenMenu:t[0]||(t[0]=e=>o.menuOpen=!o.menuOpen)}),(0,s._)("div",r,[(0,s._)("div",l,[(0,s._)("div",i,[c.tournament?((0,s.wg)(),(0,s.j4)(h,{key:0})):(0,s.kq)("",!0)]),u]),m,(0,s._)("button",{class:"button is-info",onClick:t[1]||(t[1]=(...t)=>e.addTournament&&e.addTournament(...t))},"Add new tournament"),e.message.show?((0,s.wg)(),(0,s.j4)(p,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(g,{active:o.menuOpen,onCloseMenu:t[2]||(t[2]=e=>o.menuOpen=!1),onOpenSavedTournament:c.openSavedTournament,onOpenHelp:t[3]||(t[3]=e=>{o.menuOpen=!1,o.helpOpen=!0})},null,8,["active","onOpenSavedTournament"]),o.showSavedTournament?((0,s.wg)(),(0,s.j4)(_,{key:1,tournament:e.savedTournaments[o.savedTournamentsActive],onCloseModal:c.closeTournamentModal},null,8,["tournament","onCloseModal"])):(0,s.kq)("",!0),o.helpOpen?((0,s.wg)(),(0,s.j4)(f,{key:2,onCloseModal:t[4]||(t[4]=e=>o.helpOpen=!1)})):(0,s.kq)("",!0)])],64)}var d=n(577);const h={class:"message-header"},p={class:"message-body"};function g(e,t,n,a,o,r){return(0,s.wg)(),(0,s.iD)("article",{class:(0,d.C_)(["message is-success",{"is-danger":"error"===e.message.type}])},[(0,s._)("div",h,[(0,s._)("p",null,(0,d.zw)(e.message.title),1),(0,s._)("button",{class:"delete","aria-label":"delete",onClick:t[0]||(t[0]=(...t)=>e.closeMessage&&e.closeMessage(...t))})]),(0,s._)("div",p,(0,d.zw)(e.message.text),1)],2)}var _=n(907),f={name:"Message",mounted(){const e=this;setTimeout(e.hideMessage,3e3)},computed:(0,_.rn)(["message"]),methods:{...(0,_.OI)(["hideMessage"])}},w=n(744);const y=(0,w.Z)(f,[["render",g],["__scopeId","data-v-217e01bc"]]);var v=y;const k=e=>((0,s.dD)("data-v-01a2e258"),e=e(),(0,s.Cn)(),e),b={class:"menu"},T={class:"has-text-right"},D={key:0,class:"menu-label is-hidden-desktop"},x={key:1,class:"navbar-item has-dropdown is-hoverable is-hidden-desktop"},O=k((()=>(0,s._)("a",{class:"navbar-link"}," Choose ",-1))),I={key:0,class:"navbar-dropdown"},R=["onClick"],C={key:2,class:"menu-label"},S={class:"menu-list"},z=["onClick"],M=k((()=>(0,s._)("p",{class:"menu-label"}," Info ",-1))),P={class:"menu-list"},q=k((()=>(0,s._)("li",null,[(0,s._)("a",{href:"https://en.wikipedia.org/wiki/Swiss-system_tournament",target:"_blank"},"Swiss system")],-1))),B=k((()=>(0,s._)("p",{class:"menu-label"}," Useful Links ",-1))),E=k((()=>(0,s._)("ul",{class:"menu-list"},[(0,s._)("li",null,[(0,s._)("a",{href:"http://portal.petanque.org.ua/",target:"_blank"},"Portal")])],-1)));function N(e,t,n,o,r,l){return(0,s.wg)(),(0,s.iD)("div",{class:(0,d.C_)(["menu-wrapper",{active:n.active}]),onClick:t[2]||(t[2]=(0,a.iM)((t=>e.$emit("closeMenu")),["self"]))},[(0,s._)("aside",b,[(0,s._)("div",T,[(0,s._)("a",{href:"#",class:"delete is-large",onClick:t[0]||(t[0]=(0,a.iM)((t=>e.$emit("closeMenu")),["prevent"]))})]),e.tournaments.length>1?((0,s.wg)(),(0,s.iD)("p",D," Active tournaments ")):(0,s.kq)("",!0),e.tournaments.length>1?((0,s.wg)(),(0,s.iD)("div",x,[O,e.tournaments.length>1?((0,s.wg)(),(0,s.iD)("div",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tournaments,((t,n)=>((0,s.wg)(),(0,s.iD)("a",{class:(0,d.C_)(["navbar-item",{"is-active":n===e.currentTournamentIndex}]),key:n,onClick:(0,a.iM)((e=>l.chooseTournament(n)),["prevent"])},(0,d.zw)(t.name||"Tournament "+r.tournamentNames[n]),11,R)))),128))])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),e.savedTournaments.length?((0,s.wg)(),(0,s.iD)("p",C," Saved tournaments ")):(0,s.kq)("",!0),(0,s._)("ul",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.savedTournaments,((t,n)=>((0,s.wg)(),(0,s.iD)("li",{key:n},[(0,s._)("a",{href:"#",onClick:(0,a.iM)((t=>e.$emit("openSavedTournament",n)),["prevent"])},(0,d.zw)(t.name),9,z)])))),128))]),M,(0,s._)("ul",P,[q,(0,s._)("li",null,[(0,s._)("a",{href:"#",onClick:t[1]||(t[1]=(0,a.iM)((t=>e.$emit("openHelp")),["prevent"]))},"How to use (in progress)?")])]),B,E])],2)}const U=["A","B","C","D","E","F"];function H(e,t,n,a){if(t===n)return"-";let s;return e.forEach((e=>{e.forEach((e=>{e.team_1+e.team_2!==t+n&&e.team_2+e.team_1!==t+n||(s=e)}))})),s?a?t===s.team_1?s.team_1_score-s.team_2_score||0:s.team_2_score-s.team_1_score||0:t===s.team_1?`${s.team_1_score||0} : ${s.team_2_score||0}`:`${s.team_2_score||0} : ${s.team_1_score||0}`:void 0}function G(e,t){let n=[];if(e.playOffBracket){const a=JSON.parse(JSON.stringify(e.playOffBracket.stages)).reverse(),s=JSON.parse(JSON.stringify(e.playOffBracket.thirdPlace));let o=[];for(let e=0;e<a.length;e++)if(1===a[e].stageLabel){const t={place:"1",title:a[e].teams[0].team_1_score>a[e].teams[0].team_2_score?a[e].teams[0].team_1:a[e].teams[0].team_2};n.push(t),o.push(t.title);const s={place:"2",title:a[e].teams[0].team_1_score>a[e].teams[0].team_2_score?a[e].teams[0].team_2:a[e].teams[0].team_1};n.push(s),o.push(s.title)}else if(2===a[e].stageLabel){const e={place:"3",title:s.team_1_score>s.team_2_score?s.team_1:s.team_2};n.push(e),o.push(e.title);const t={place:"4",title:s.team_1_score>s.team_2_score?s.team_2:s.team_1};n.push(t),o.push(t.title)}else a[e].teams.forEach((t=>{const s=o.includes(t.team_1)?t.team_2:t.team_1,r={place:a[e].stageLabel+1+"-"+2*a[e].stageLabel,title:s};n.push(r),o.push(r.title)}));if(e.games.length>0)if("swiss"===e.system||"groups"===e.system&&1===t.length)t.slice(e.playOffBracket.stages[0].teamsCount,t.length).forEach(((t,a)=>{const s={place:e.playOffBracket.stages[0].teamsCount+a+1,title:t.title,players:t.players};n.push(s)}));else{const a=t.length,s=e.playOffBracket.stages[0].teamsCount;let o=[];t.forEach(((e,t)=>{o[t]=e.slice(s/a)}));for(let e=0;e<o[0].length;e++)o.forEach((t=>{if(t[e]){const o={place:s+e*a+1+"-"+(s+e*a+a),title:t[e].title};n.push(o)}}))}}else if("swiss"===e.system||"groups"===e.system&&1===t.length){const a="swiss"===e.system?t:t[0];a.forEach(((e,t)=>{const a={place:t+1,title:e.title,players:e.players};n.push(a)}))}return n}var K={name:"Menu",data(){return{tournamentNames:U}},props:["active"],computed:(0,_.rn)(["tournaments","currentTournamentIndex","savedTournaments"]),methods:{...(0,_.OI)(["setActiveTournament"]),chooseTournament(e){this.setActiveTournament(e),this.$emit("closeMenu")}}};const Y=(0,w.Z)(K,[["render",N],["__scopeId","data-v-01a2e258"]]);var A=Y;const $=e=>((0,s.dD)("data-v-65d45036"),e=e(),(0,s.Cn)(),e),j={class:"content is-flex is-justify-content-space-between mb-3"},L={key:0,class:"card"},V=$((()=>(0,s._)("p",{class:"card-header-title"}," Results in tables ",-1))),J=$((()=>(0,s._)("button",{class:"card-header-icon","aria-label":"more options"},[(0,s._)("span",{class:"icon"},[(0,s._)("i",{class:"fas fa-angle-down","aria-hidden":"true"})])],-1))),F=[V,J],Z={key:1,class:"card"},W=$((()=>(0,s._)("p",{class:"card-header-title"}," Games ",-1))),Q=$((()=>(0,s._)("button",{class:"card-header-icon","aria-label":"more options"},[(0,s._)("span",{class:"icon"},[(0,s._)("i",{class:"fas fa-angle-down","aria-hidden":"true"})])],-1))),X=[W,Q],ee={class:"table-container"},te={key:0,class:"table is-striped mb-5"},ne={key:0},ae={class:"has-text-centered"},se={class:"table-container"},oe={class:"table is-striped"};function re(e,t,n,a,o,r){const l=(0,s.up)("Ranking"),i=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(i,{onCloseModal:t[3]||(t[3]=t=>e.$emit("close-modal"))},{default:(0,s.w5)((()=>[(0,s._)("div",j,[(0,s._)("h2",null,(0,d.zw)(n.tournament.name),1),(0,s._)("button",{class:"button is-danger",onClick:t[0]||(t[0]=t=>{e.removeSavedTournament(n.tournament.name),e.$emit("close-modal")})},"Remove tournament")]),n.tournament.ranking?((0,s.wg)(),(0,s.iD)("div",L,[(0,s._)("header",{class:"card-header",onClick:t[1]||(t[1]=e=>{o.showGames=!1,o.showSwissTable=!o.showSwissTable})},F),(0,s._)("div",{class:(0,d.C_)(["card-content",{active:o.showSwissTable}])},[(0,s.Wm)(l,{tournament:n.tournament,rankingTeams:n.tournament.ranking,showInSaved:"true"},null,8,["tournament","rankingTeams"])],2)])):(0,s.kq)("",!0),n.tournament.games?((0,s.wg)(),(0,s.iD)("div",Z,[(0,s._)("header",{class:"card-header",onClick:t[2]||(t[2]=e=>{o.showSwissTable=!1,o.showGames=!o.showGames})},X),(0,s._)("div",{class:(0,d.C_)(["card-content",{active:o.showGames}])},[(0,s._)("div",ee,[n.tournament.games?((0,s.wg)(),(0,s.iD)("table",te,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tournament.games,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,n)=>((0,s.wg)(),(0,s.iD)("tr",{key:n},[(0,s._)("td",null,"R"+(0,d.zw)(t+1),1),(0,s._)("td",null,(0,d.zw)(e.team_1),1),(0,s._)("td",null,(0,d.zw)(e.team_1_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2),1)])))),128))],64)))),128))])])):(0,s.kq)("",!0)]),n.tournament.playOff?((0,s.wg)(),(0,s.iD)("div",ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tournament.playOff.stages,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"mb-5"},[(0,s._)("h3",ae,(0,d.zw)(1===e.stageLabel?"Final":"1/"+e.stageLabel+" final"),1),(0,s._)("div",se,[(0,s._)("table",oe,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.teams,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[(0,s._)("td",null,(0,d.zw)(e.team_1),1),(0,s._)("td",null,(0,d.zw)(e.team_1_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2),1)])))),128))])])])])))),128))])):(0,s.kq)("",!0)],2)])):(0,s.kq)("",!0)])),_:1})}const le={key:0,class:"mb-5"},ie={class:"is-flex is-justify-content-space-between is-align-content-center"},ue=(0,s._)("h2",null,"Tournament Result",-1),me={class:"table-container"},ce={id:"table-finish-ranking",class:"table"},de=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Place"),(0,s._)("th",null,"Team"),(0,s._)("th",null,"Players")])],-1),he={key:0,class:"is-size-7"},pe={key:0},ge={key:1},_e={key:0},fe=(0,s.Uk)("Ranking "),we={key:0},ye={key:1},ve={key:1},ke={class:"table-container"},be={id:"table-ranking",class:"table"},Te=(0,s._)("th",null,"#",-1),De=(0,s._)("th",null,"Team",-1),xe=(0,s._)("th",null,"Wins",-1),Oe=(0,s._)("th",null,"Buh",-1),Ie=(0,s._)("th",null,"SBuh",-1),Re=(0,s._)("th",null,"Points",-1),Ce={key:0},Se=(0,s._)("td",null,[(0,s._)("span",{class:"team-count"})],-1),ze={align:"center"},Me={align:"center"},Pe={align:"center"},qe={align:"center"},Be={key:0},Ee={key:2},Ne={key:0},Ue={class:"table-container mb-5"},He={class:"table table is-striped"},Ge=(0,s._)("th",null,"Place",-1),Ke=(0,s._)("th",null,"Team",-1),Ye=(0,s._)("th",null,"Wins",-1),Ae=(0,s._)("th",null,"Points",-1),$e={align:"center"},je={align:"center"};function Le(e,t,n,a,o,r){return(0,s.wg)(),(0,s.iD)("div",null,[n.tournament.tournamentIsFinished?((0,s.wg)(),(0,s.iD)("div",le,[(0,s._)("div",ie,[ue,(0,s._)("button",{class:"button is-info",onClick:t[0]||(t[0]=(...e)=>r.copyResults&&r.copyResults(...e))},"Copy results")]),(0,s._)("div",me,[(0,s._)("table",ce,[de,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.showInSaved?n.rankingTeams:r.tournamentRanking,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[(0,s._)("td",null,(0,d.zw)(e.place),1),(0,s._)("td",null,(0,d.zw)(e.title),1),(0,s._)("td",null,[(n.showInSaved?e.players&&e.players.length:r.getTeamPlayers(e.title).length)?((0,s.wg)(),(0,s.iD)("div",he,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.showInSaved?e.players:r.getTeamPlayers(e.title),((t,n)=>((0,s.wg)(),(0,s.iD)("span",{class:"has-text-dark",key:n},[(0,s.Uk)((0,d.zw)(t.name)+" "+(0,d.zw)(t.surname)+" ",1),n<r.getTeamPlayers(e.title).length-1?((0,s.wg)(),(0,s.iD)("span",pe,", ")):(0,s.kq)("",!0)])))),128))])):(0,s.kq)("",!0)])])))),128))])])])])):(0,s.kq)("",!0),n.tournament.games.length>0?((0,s.wg)(),(0,s.iD)("div",ge,["swiss"===n.tournament.system?((0,s.wg)(),(0,s.iD)("h2",_e,[fe,n.activeRound?((0,s.wg)(),(0,s.iD)("span",we,"after "+(0,d.zw)(n.activeRound-1)+" round"+(0,d.zw)(n.activeRound>2&&0!==n.activeRound?"s ":" "),1)):(0,s.kq)("",!0),"swiss"===n.tournament.system?((0,s.wg)(),(0,s.iD)("span",ye,"swiss")):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"swiss"===n.tournament.system?((0,s.wg)(),(0,s.iD)("div",ve,[(0,s._)("div",ke,[(0,s._)("table",be,[(0,s._)("thead",null,[(0,s._)("tr",null,[Te,De,xe,Oe,Ie,Re,n.tournament.useRating?((0,s.wg)(),(0,s.iD)("th",Ce,"Rating")):(0,s.kq)("",!0)])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.rankingTeams,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.title},[Se,(0,s._)("td",null,(0,d.zw)(e.title),1),(0,s._)("td",ze,(0,d.zw)(e.wins),1),(0,s._)("td",Me,(0,d.zw)(e.buhgolts),1),(0,s._)("td",Pe,(0,d.zw)(e.smallBuhgolts),1),(0,s._)("td",qe,(0,d.zw)(e.pointsPlus)+":"+(0,d.zw)(e.pointsMinus),1),n.tournament.useRating?((0,s.wg)(),(0,s.iD)("td",Be,(0,d.zw)(e.rating),1)):(0,s.kq)("",!0)])))),128))])])])])):n.tournament.groups?((0,s.wg)(),(0,s.iD)("div",Ee,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.rankingTeams,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[n.tournament.groups&&n.tournament.groups.length>1?((0,s.wg)(),(0,s.iD)("h4",Ne,"Group "+(0,d.zw)(r.groupsNames[t]),1)):(0,s.kq)("",!0),(0,s._)("div",Ue,[(0,s._)("table",He,[(0,s._)("thead",null,[(0,s._)("tr",null,[Ge,Ke,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("th",{key:t,align:"center"},(0,d.zw)(t+1),1)))),128)),Ye,Ae])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((t,a)=>((0,s.wg)(),(0,s.iD)("tr",{key:a},[(0,s._)("td",null,(0,d.zw)(a+1),1),(0,s._)("td",null,(0,d.zw)(t.title),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,a)=>((0,s.wg)(),(0,s.iD)("td",{key:a,align:"center",class:"no-wrap"},(0,d.zw)(r.getGameResultInGroup(n.tournament.games,t.title,e.title)),1)))),128)),(0,s._)("td",$e,(0,d.zw)(t.wins),1),(0,s._)("td",je,(0,d.zw)(t.pointsPlus)+":"+(0,d.zw)(t.pointsMinus),1)])))),128))])])])])))),128))])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}var Ve={name:"Ranking",props:["tournament","rankingTeams","activeRound","showInSaved"],emits:["is-playoff"],data(){return{playOffBracket:localStorage.getItem("playOffBracket")?JSON.parse(localStorage.getItem("playOffBracket")):null}},methods:{getGameResultInGroup:H,copyResults(){const e=document.createElement("div");let t="";this.tournamentRanking.forEach((e=>{t=t+"<span>"+e.place+"</span><p>"+e.title+"</p>"})),e.innerHTML=t.trim(),document.body.appendChild(e);const n=new Range;n.selectNode(e);const a=window.getSelection();a.removeAllRanges(),a.addRange(n),document.execCommand("copy"),e.remove()},getTeamPlayers(e){return this.tournament.teams&&this.tournament.teams.find((t=>t.title===e)).players?this.tournament.teams.find((t=>t.title===e)).players:""}},computed:{groupsNames(){return U},tournamentRanking(){return G(this.tournament,this.rankingTeams)}}};const Je=(0,w.Z)(Ve,[["render",Le]]);var Fe=Je;const Ze={class:"modal is-active"},We={class:"modal-content"},Qe={class:"box"};function Xe(e,t,n,o,r,l){return(0,s.wg)(),(0,s.iD)("div",Ze,[(0,s._)("div",{class:"modal-background",onClick:t[0]||(t[0]=(0,a.iM)((t=>e.$emit("close-modal")),["self"]))}),(0,s._)("div",We,[(0,s._)("div",Qe,[(0,s.WI)(e.$slots,"default")])]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("close-modal"))})])}var et={name:"Modal",emits:["close-modal"]};const tt=(0,w.Z)(et,[["render",Xe]]);var nt=tt,at={name:"SavedTournamentModal",components:{Modal:nt,Ranking:Fe},props:["tournament"],emits:["close-modal"],data(){return{showSwissTable:!1,showGames:!1}},methods:(0,_.OI)(["removeSavedTournament"])};const st=(0,w.Z)(at,[["render",re],["__scopeId","data-v-65d45036"]]);var ot=st;const rt={class:"text-center is-size-3"},lt=(0,s.Uk)(),it={class:"is-size-5 is-capitalized"},ut={key:0},mt={class:"field"},ct=(0,s._)("label",{class:"label",for:""},"System",-1),dt={class:"control"},ht={class:"radio"},pt=(0,s.Uk)(" Swiss "),gt={class:"radio"},_t=(0,s.Uk)(" Groups "),ft={key:0,class:"field"},wt=(0,s._)("label",{class:"label"},"How many team in group?",-1),yt={class:"control"},vt={class:"select"},kt={key:0},bt={class:"tabs"},Tt=["onClick"],Dt={key:1,class:"content tabs-content"},xt={key:2,class:"mb-5 mt-5"},Ot={class:"field is-grouped"},It={class:"control"},Rt={key:0,class:"control"},Ct={key:1,class:"control"},St={key:4,class:"content tabs-content"},zt={key:0},Mt={class:"mt-5"},Pt=(0,s._)("h2",{class:"h2"},"Go to play-off?",-1),qt={class:"is-flex is-align-items-center"},Bt=(0,s.Uk)("Choose number of teams "),Et={class:"select ml-3"},Nt={key:0},Ut={key:1},Ht={key:2},Gt={key:3},Kt={key:4},Yt={key:5},At={key:0,class:"mt-5"},$t={class:"checkbox"},jt=["checked"],Lt=(0,s.Uk)(" Also play "),Vt=(0,s._)("strong",null,"Tournament B",-1),Jt=(0,s.Uk)("? ");function Ft(e,t,n,o,r,l){const i=(0,s.up)("AddTeam"),u=(0,s.up)("TeamsList"),m=(0,s.up)("Games"),c=(0,s.up)("Results"),h=(0,s.up)("Ranking"),p=(0,s.up)("SaveTournament"),g=(0,s.up)("ConfirmRemoveModal"),_=(0,s.up)("ChangeTournamentName");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",rt,[(0,s._)("strong",{class:"pointer",onClick:t[0]||(t[0]=e=>r.changeNameModal=!0)},(0,d.zw)(l.tournament.name),1),lt,(0,s._)("span",it,"("+(0,d.zw)(l.tournament.system)+")",1)]),l.tournament.games.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ut,[(0,s._)("div",mt,[ct,(0,s._)("div",dt,[(0,s._)("label",ht,[(0,s.wy)((0,s._)("input",{type:"radio",name:"system",id:"swiss",value:"swiss","onUpdate:modelValue":t[1]||(t[1]=e=>l.tournament.system=e)},null,512),[[a.G2,l.tournament.system]]),pt]),(0,s._)("label",gt,[(0,s.wy)((0,s._)("input",{type:"radio",name:"system",id:"groups",value:"groups","onUpdate:modelValue":t[2]||(t[2]=e=>l.tournament.system=e)},null,512),[[a.G2,l.tournament.system]]),_t])])]),"groups"===l.tournament.system?((0,s.wg)(),(0,s.iD)("div",ft,[wt,(0,s._)("div",yt,[(0,s._)("div",vt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.teamsInGroup=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tournament.teams,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[t>1?((0,s.wg)(),(0,s.iD)("option",kt,(0,d.zw)(t+1),1)):(0,s.kq)("",!0)],64)))),128))],512),[[a.bM,r.teamsInGroup,void 0,{number:!0}]])])])])):(0,s.kq)("",!0)])),(0,s._)("div",bt,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tabs,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:(0,d.C_)({"is-active":e===r.activeTab})},[(0,s._)("a",{href:"#",onClick:(0,a.iM)((t=>r.activeTab=e),["prevent"])},(0,d.zw)(e),9,Tt)],2)))),128))])]),"Teams"===r.activeTab?((0,s.wg)(),(0,s.iD)("div",Dt,[l.tournament.games.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(i,{key:0})),l.tournament.teams.length?((0,s.wg)(),(0,s.j4)(u,{key:1,activeRound:l.activeRound},null,8,["activeRound"])):((0,s.wg)(),(0,s.iD)("div",xt," Please, add team ")),(0,s._)("div",Ot,[(0,s._)("div",It,[(0,s._)("button",{class:"button is-danger",onClick:t[4]||(t[4]=e=>r.removeConfirm=!0)},"Remove tournament")]),l.canSaveTournament||l.tournament.tournamentIsFinished?((0,s.wg)(),(0,s.iD)("div",Rt,[(0,s._)("button",{class:"button is-success",onClick:t[5]||(t[5]=e=>r.showSaveTournament=!0)},"Save tournament")])):(0,s.kq)("",!0),!l.tournament.tournamentIsFinished&&l.tournament.games.length>1?((0,s.wg)(),(0,s.iD)("div",Ct,[(0,s._)("button",{class:"button is-info",onClick:t[6]||(t[6]=(...t)=>e.finishTournament&&e.finishTournament(...t))},"Finish tournament")])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0),"Games"===r.activeTab?((0,s.wg)(),(0,s.j4)(m,{key:2,activeRound:l.activeRound,"teams-in-group":r.teamsInGroup,onOpenResults:t[7]||(t[7]=e=>r.activeTab="Ranking")},null,8,["activeRound","teams-in-group"])):(0,s.kq)("",!0),"Results"===r.activeTab?((0,s.wg)(),(0,s.j4)(c,{key:3})):(0,s.kq)("",!0),"Ranking"===r.activeTab?((0,s.wg)(),(0,s.iD)("div",St,[(0,s.Wm)(h,{tournament:l.tournament,rankingTeams:l.rankingTeams,activeRound:l.activeRound},null,8,["tournament","rankingTeams","activeRound"]),!l.tournament.playOff&&l.tournament.teams.length>1?((0,s.wg)(),(0,s.iD)("div",zt,[(0,s._)("div",Mt,[Pt,(0,s._)("div",qt,[Bt,(0,s._)("div",Et,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.teamToPlayOff=e)},[l.tournament.teams.length>=2?((0,s.wg)(),(0,s.iD)("option",Nt,"2")):(0,s.kq)("",!0),l.tournament.teams.length>=4?((0,s.wg)(),(0,s.iD)("option",Ut,"4")):(0,s.kq)("",!0),l.tournament.teams.length>=8?((0,s.wg)(),(0,s.iD)("option",Ht,"8")):(0,s.kq)("",!0),l.tournament.teams.length>=16?((0,s.wg)(),(0,s.iD)("option",Gt,"16")):(0,s.kq)("",!0),l.tournament.teams.length>=32?((0,s.wg)(),(0,s.iD)("option",Kt,"32")):(0,s.kq)("",!0),l.tournament.teams.length>=64?((0,s.wg)(),(0,s.iD)("option",Yt,"64")):(0,s.kq)("",!0)],512),[[a.bM,r.teamToPlayOff,void 0,{number:!0}]])]),(0,s._)("button",{onClick:t[9]||(t[9]=(...e)=>l.startPlayOff&&l.startPlayOff(...e)),class:"button is-success ml-3"},"Go!")])]),"swiss"===l.tournament.system?((0,s.wg)(),(0,s.iD)("div",At,[(0,s._)("label",$t,[(0,s._)("input",{type:"checkbox",checked:r.playB,onChange:t[10]||(t[10]=(...e)=>r.playB&&r.playB(...e))},null,40,jt),Lt,Vt,Jt])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),r.showSaveTournament?((0,s.wg)(),(0,s.j4)(p,{key:5,"ranking-teams":l.rankingTeams,onCloseModal:t[11]||(t[11]=e=>r.showSaveTournament=!1)},null,8,["ranking-teams"])):(0,s.kq)("",!0),r.removeConfirm?((0,s.wg)(),(0,s.j4)(g,{key:6,onCloseModal:t[12]||(t[12]=e=>r.removeConfirm=!1)})):(0,s.kq)("",!0),r.changeNameModal?((0,s.wg)(),(0,s.j4)(_,{key:7,onCloseModal:t[13]||(t[13]=e=>r.changeNameModal=!1)})):(0,s.kq)("",!0)])}const Zt={class:"columns"},Wt={class:"column is-three-fifths"},Qt={class:"field control"},Xt={class:"column is-two-fifths"},en={class:"field control"},tn={class:"columns"},nn={class:"column is-three-fifths-desktop is-two-fifths-tablet"},an={class:"field control"},sn={key:0,class:"column is-one-fifth"},on={class:"field control"},rn={class:"column is-one-fifth-desktop is-two-fifths-tablet is-full-mobile"},ln={class:"field control"},un={class:"checkbox"},mn=["checked"],cn=(0,s.Uk)(" Use team rating for drawing ");function dn(e,t,n,o,r,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Zt,[(0,s._)("div",Wt,[(0,s._)("div",Qt,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.tournamentId=e),onKeydown:t[1]||(t[1]=(0,a.D2)(((...e)=>l.importList&&l.importList(...e)),["enter"])),class:"input",type:"number",placeholder:"Tournament ID"},null,544),[[a.nr,r.tournamentId]])])]),(0,s._)("div",Xt,[(0,s._)("div",en,[(0,s._)("button",{class:"button is-success is-fullwidth",onClick:t[2]||(t[2]=(...e)=>l.importList&&l.importList(...e))},"Import from portal")])])]),(0,s._)("div",tn,[(0,s._)("div",nn,[(0,s._)("div",an,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.teamTitle=e),onKeyup:t[4]||(t[4]=(0,a.D2)((e=>l.addTeam(r.teamTitle,r.teamRating)),["enter"])),class:"input",type:"text",placeholder:"Team title"},null,544),[[a.nr,r.teamTitle]])])]),l.tournament.useRating?((0,s.wg)(),(0,s.iD)("div",sn,[(0,s._)("div",on,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.teamRating=e),onKeyup:t[6]||(t[6]=(0,a.D2)((e=>l.addTeam(r.teamTitle,r.teamRating)),["enter"])),class:"input",type:"number",id:"rating",placeholder:"Rating"},null,544),[[a.nr,r.teamRating]])])])):(0,s.kq)("",!0),(0,s._)("div",rn,[(0,s._)("div",ln,[(0,s._)("button",{class:"button is-success is-fullwidth",onClick:t[7]||(t[7]=e=>l.addTeam(r.teamTitle,r.teamRating))},"Add team")])])]),(0,s._)("div",null,[(0,s._)("label",un,[(0,s._)("input",{type:"checkbox",checked:l.tournament.useRating,onChange:t[8]||(t[8]=t=>e.changeDrawType(t.target.checked))},null,40,mn),cn])])],64)}var hn={name:"AddTeam",props:["showRating"],data(){return{teamTitle:null,teamRating:null,tournamentId:null}},emits:["add-team","change-draw-style"],computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]}},methods:{...(0,_.OI)(["addTeamToStore","changeDrawType","showMessage"]),addTeam(e,t,n=!1){if(null!==e&&""!==e){let a=!1;if(this.tournament.teams.forEach((t=>{t.title===e&&(a=!0)})),a)this.showMessage({title:"Error",text:"Such team already registered! Change team title, please",type:"error"});else{const a={title:e.trim(),rating:t,players:n,wins:0,buhgolts:0,smallBuhgolts:0,pointsPlus:0,pointsMinus:0,opponents:[]};this.addTeamToStore(a),this.teamTitle=null,this.teamRating=null}}else this.showMessage({title:"Error",text:"Enter fields to add team",type:"error"})},async importList(){let e=await fetch(`https://portal.petanque.org.ua/tournament/team_export/${this.tournamentId}?format=json`);if(e.ok){let t=await e.json();t.teams.forEach((e=>{this.addTeam(e.name,+e.power,e.players)}))}else alert("Error"+e.status)}}};const pn=(0,w.Z)(hn,[["render",dn]]);var gn=pn;const _n={class:"content tabs-content"},fn={key:1},wn={class:"field is-grouped"},yn={key:0,class:"control"},vn={key:1,class:"control ml-auto"},kn={key:0},bn=(0,s.Uk)("Show "),Tn={key:0},Dn=(0,s.Uk)(),xn={key:1},On=(0,s.Uk)(" View "),In={class:"text-center"},Rn={class:"games-list"},Cn={class:"text-right team-block"},Sn=["for"],zn={class:"text-center score-block"},Mn=["id","onUpdate:modelValue","disabled"],Pn={class:"lane-block is-size-7"},qn=(0,s.Uk)(" Lane "),Bn={class:"is-size-5 has-text-weight-bold"},En=["id","onUpdate:modelValue","disabled"],Nn={class:"team-block"},Un=["for"],Hn={key:0,class:"has-text-centered has-text-danger mb-5"},Gn={class:"text-center mt-3"},Kn=["disabled"],Yn={key:0,class:"has-text-danger mt-3"},An={key:1},$n={key:2},jn={key:3,class:"mb-5 mt-5"},Ln=(0,s.Uk)(" Please, click on button to draw "),Vn=(0,s.Uk)(" round ");function Jn(e,t,n,o,r,l){const i=(0,s.up)("PlayOff");return(0,s.wg)(),(0,s.iD)("div",_n,[l.tournament.playOff?((0,s.wg)(),(0,s.j4)(i,{key:0,onOpenResults:t[0]||(t[0]=t=>e.$emit("openResults"))})):((0,s.wg)(),(0,s.iD)("div",fn,[(0,s._)("div",wn,[!l.tournament.playOff&&!l.tournament.roundIsActive&&l.tournament.games.length<l.teamsCount?((0,s.wg)(),(0,s.iD)("div",yn,[(0,s._)("button",{class:"button is-info",onClick:t[1]||(t[1]=(...e)=>l.drawRound&&l.drawRound(...e))},(0,d.zw)(1===n.activeRound?"First":`Draw ${n.activeRound}`)+" Round ",1)])):(0,s.kq)("",!0),"swiss"===l.tournament.system&&l.tournament.games.length>1&&l.tournament.roundIsActive?((0,s.wg)(),(0,s.iD)("div",vn,[(0,s._)("button",{class:"button is-danger",onClick:t[2]||(t[2]=(...e)=>l.restoreRoundGames&&l.restoreRoundGames(...e))}," Restore previous round ")])):(0,s.kq)("",!0)]),l.tournament.games.length&&l.tournament.roundIsActive?((0,s.wg)(),(0,s.iD)("div",kn,[(0,s._)("button",{class:"button is-info is-hidden-tablet",onClick:t[3]||(t[3]=e=>r.compactView=!r.compactView)},[bn,r.compactView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",Tn," Compact ")),Dn,r.compactView?((0,s.wg)(),(0,s.iD)("span",xn," Full ")):(0,s.kq)("",!0),On]),(0,s._)("h2",In,"Round "+(0,d.zw)(n.activeRound),1),(0,s._)("div",Rn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tournament.games[n.activeRound-1],((e,n)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,d.C_)(["game-row",{compact:r.compactView}]),key:n},[(0,s._)("span",Cn,[(0,s._)("label",{for:"team_"+n},(0,d.zw)(e.team_1),9,Sn)]),(0,s._)("span",zn,[r.compactView?(0,s.kq)("",!0):(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,id:"team_"+n,"onUpdate:modelValue":t=>e.team_1_score=t,class:"input -small",type:"number",min:"0",max:"13",disabled:"Technical"===e.team_2,onKeyup:t[4]||(t[4]=(0,a.D2)(((...e)=>l.saveResults&&l.saveResults(...e)),["enter"]))},null,40,Mn)),[[a.nr,e.team_1_score]]),(0,s._)("span",Pn,[qn,(0,s._)("span",Bn,(0,d.zw)(n+1),1)]),r.compactView?(0,s.kq)("",!0):(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:1,id:"opponent_"+n,"onUpdate:modelValue":t=>e.team_2_score=t,class:"input -small",type:"number",min:"0",max:"13",disabled:"Technical"===e.team_2,onKeyup:t[5]||(t[5]=(0,a.D2)(((...e)=>l.saveResults&&l.saveResults(...e)),["enter"]))},null,40,En)),[[a.nr,e.team_2_score]])]),(0,s._)("span",Nn,[(0,s._)("label",{for:"opponent_"+n},(0,d.zw)(e.team_2),9,Un)])],2)))),128)),r.scoreError?((0,s.wg)(),(0,s.iD)("div",Hn,"Something wrong in games results ")):(0,s.kq)("",!0)]),(0,s._)("div",Gn,[(0,s._)("button",{class:"button is-success",onClick:t[6]||(t[6]=(...e)=>l.saveResults&&l.saveResults(...e)),disabled:r.saveDisabled},"Save results",8,Kn)]),r.saveDisabled?((0,s.wg)(),(0,s.iD)("div",Yn,"There was an unexpectable error, sorry for that, you can write developer about it (contact in footer), but this will not help you in this situation:)) ")):(0,s.kq)("",!0)])):0===l.tournament.games.length?((0,s.wg)(),(0,s.iD)("div",An,"No games, yet")):l.tournament.games.length>=l.teamsCount?((0,s.wg)(),(0,s.iD)("div",$n,"Rounds quantity can't be more than teams")):((0,s.wg)(),(0,s.iD)("div",jn,[Ln,(0,s._)("b",null,(0,d.zw)(1===n.activeRound?"first":n.activeRound),1),Vn]))]))])}const Fn={class:"is-flex is-justify-content-space-between is-align-content-center"},Zn=(0,s._)("h2",null,"PlayOff",-1),Wn={key:0,class:"column play-off-stage-wrapper"},Qn={key:0,class:"has-text-centered is-size-4"},Xn=(0,s.Uk)(" Tournament has finished. "),ea={class:"text-center"},ta={class:"text-right team-block"},na=["for"],aa={class:"text-center score-block"},sa=["id","onUpdate:modelValue"],oa={class:"lane-block is-size-7"},ra=(0,s.Uk)(" Lane "),la={class:"is-size-5 has-text-weight-bold"},ia=["id","onUpdate:modelValue"],ua={class:"team-block"},ma=["for"],ca={key:0},da=(0,s._)("h3",{class:"text-center mt-5"},"Game for 3d place",-1),ha={class:"game-row"},pa={class:"text-right team-block"},ga={for:"team_1_3p"},_a={class:"text-center score-block"},fa=(0,s._)("span",{class:"lane-block is-size-7"},[(0,s.Uk)(" Lane "),(0,s._)("span",{class:"is-size-5 has-text-weight-bold"},"2")],-1),wa={class:"team-block"},ya={for:"opponent_3p"},va={key:1,class:"has-text-centered has-text-danger mb-5"},ka={class:"text-center mt-5"};function ba(e,t,n,o,r,l){const i=(0,s.up)("Bracket");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Fn,[Zn,(0,s._)("button",{class:"button is-info",onClick:t[0]||(t[0]=e=>r.showBracket=!0)},"Show play off bracket")]),l.playOffBracket?((0,s.wg)(),(0,s.iD)("div",Wn,[0===l.playOffStageCurrent?((0,s.wg)(),(0,s.iD)("div",Qn,[Xn,(0,s._)("a",{href:"#",onClick:t[1]||(t[1]=(0,a.iM)((t=>e.$emit("openResults")),["prevent"]))},"See result")])):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h2",ea,(0,d.zw)(1===l.playOffStageCurrent?"Final":"1/"+l.playOffStageCurrent+" final"),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.playOffBracket.stages[l.currentPlayOffBracketIndex].teams,((e,n)=>((0,s.wg)(),(0,s.iD)("div",{class:"game-row",key:n},[(0,s._)("span",ta,[(0,s._)("label",{for:"team_"+n},(0,d.zw)(e.team_1),9,na)]),(0,s._)("span",aa,[(0,s.wy)((0,s._)("input",{id:"team_"+n,"onUpdate:modelValue":t=>e.team_1_score=t,class:"input -small",type:"number",min:"0",max:"13",onKeyup:t[2]||(t[2]=(0,a.D2)(((...e)=>l.saveResults&&l.saveResults(...e)),["enter"]))},null,40,sa),[[a.nr,e.team_1_score]]),(0,s._)("span",oa,[ra,(0,s._)("span",la,(0,d.zw)(n+1),1)]),(0,s.wy)((0,s._)("input",{id:"opponent_"+n,"onUpdate:modelValue":t=>e.team_2_score=t,class:"input -small",type:"number",min:"0",max:"13",onKeyup:t[3]||(t[3]=(0,a.D2)(((...e)=>l.saveResults&&l.saveResults(...e)),["enter"]))},null,40,ia),[[a.nr,e.team_2_score]])]),(0,s._)("span",ua,[(0,s._)("label",{for:"opponent_"+n},(0,d.zw)(e.team_2),9,ma)])])))),128)),1===l.playOffStageCurrent&&l.tournament.playOff.length>1?((0,s.wg)(),(0,s.iD)("div",ca,[da,(0,s._)("div",ha,[(0,s._)("span",pa,[(0,s._)("label",ga,(0,d.zw)(l.playOffBracket.thirdPlace.team_1),1)]),(0,s._)("span",_a,[(0,s.wy)((0,s._)("input",{id:"team_1_3p","onUpdate:modelValue":t[4]||(t[4]=e=>l.playOffBracket.thirdPlace.team_1_score=e),class:"input -small",type:"number",min:"0",max:"13",onKeyup:t[5]||(t[5]=(0,a.D2)(((...e)=>l.saveResults&&l.saveResults(...e)),["enter"]))},null,544),[[a.nr,l.playOffBracket.thirdPlace.team_1_score]]),fa,(0,s.wy)((0,s._)("input",{id:"opponent_3p","onUpdate:modelValue":t[6]||(t[6]=e=>l.playOffBracket.thirdPlace.team_2_score=e),class:"input -small",type:"number",min:"0",max:"13",onKeyup:t[7]||(t[7]=(0,a.D2)(((...e)=>l.saveResults&&l.saveResults(...e)),["enter"]))},null,544),[[a.nr,l.playOffBracket.thirdPlace.team_2_score]])]),(0,s._)("span",wa,[(0,s._)("label",ya,(0,d.zw)(l.playOffBracket.thirdPlace.team_2),1)])])])):(0,s.kq)("",!0),r.scoreError?((0,s.wg)(),(0,s.iD)("div",va,"Something wrong in games results")):(0,s.kq)("",!0),(0,s._)("div",ka,[(0,s._)("button",{class:"button is-success",onClick:t[8]||(t[8]=(...e)=>l.saveResults&&l.saveResults(...e))},"Save results")])],64))])):(0,s.kq)("",!0),r.showBracket?((0,s.wg)(),(0,s.j4)(i,{key:1,bracket:l.playOffBracket,onCloseModal:t[9]||(t[9]=e=>r.showBracket=!1)},null,8,["bracket"])):(0,s.kq)("",!0)])}const Ta={class:"modal is-active"},Da={class:"modal-content"},xa={class:"columns play-off-wrapper"},Oa={class:"has-text-centered has-text-weight-bold mb-3"},Ia={class:"play-off-team"},Ra={key:0,class:"play-off-team-place"},Ca={class:"play-off-team-score"},Sa={class:"play-off-team"},za={key:0,class:"play-off-team-place"},Ma={class:"play-off-team-score"},Pa=(0,s._)("div",{class:"has-text-centered has-text-weight-bold mb-3 third-place-title"},"Third Place",-1),qa={class:"play-off-team"},Ba={class:"play-off-team-score"},Ea={class:"play-off-team"},Na={class:"play-off-team-score"},Ua={key:0,style:{height:"80px"}};function Ha(e,t,n,o,r,l){return(0,s.wg)(),(0,s.iD)("div",Ta,[(0,s._)("div",{class:"modal-background",onClick:t[0]||(t[0]=(0,a.iM)((t=>e.$emit("close-modal")),["self"]))}),(0,s._)("div",Da,[(0,s._)("div",xa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.bracket.stages,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"column play-off-stage-wrapper"},[(0,s._)("div",Oa,(0,d.zw)(1===e.stageLabel?"Final":"1/"+e.stageLabel+" final"),1),(0,s._)("div",{class:"play-off-stage",ref_for:!0,ref:"stage"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.teams,((n,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"play-off-game box"},[0!==t?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"play-off-game-vertical-line -top",style:(0,d.j5)({height:l.stageHeight/e.teamsCount/2+"px"})},null,4)):(0,s.kq)("",!0),0!==t?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"play-off-game-vertical-line -bottom",style:(0,d.j5)({height:l.stageHeight/e.teamsCount/2+"px"})},null,4)):(0,s.kq)("",!0),(0,s._)("div",Ia,[n.team_1_place?((0,s.wg)(),(0,s.iD)("span",Ra,(0,d.zw)(n.team_1_place),1)):(0,s.kq)("",!0),(0,s._)("span",{class:(0,d.C_)(["play-off-team-title",{"has-text-grey-lighter":!n.team_1}])},(0,d.zw)(n.team_1||"Someone"),3),(0,s._)("span",Ca,(0,d.zw)(n.team_1_score),1)]),(0,s._)("div",Sa,[n.team_2_place?((0,s.wg)(),(0,s.iD)("span",za,(0,d.zw)(n.team_2_place),1)):(0,s.kq)("",!0),(0,s._)("span",{class:(0,d.C_)(["play-off-team-title",{"has-text-grey-lighter":!n.team_2}])},(0,d.zw)(n.team_2||"Lucky guy"),3),(0,s._)("span",Ma,(0,d.zw)(n.team_2_score),1)])])))),128)),1===e.stageLabel?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,d.C_)(["play-off-game box third-place",{"third-place-bottom":2===n.bracket.stages.length}])},[Pa,(0,s._)("div",qa,[(0,s._)("span",{class:(0,d.C_)(["play-off-team-title",{"has-text-grey-lighter":!n.bracket.thirdPlace.team_1}])},(0,d.zw)(n.bracket.thirdPlace.team_1||"Someone"),3),(0,s._)("span",Ba,(0,d.zw)(n.bracket.thirdPlace.team_1_score),1)]),(0,s._)("div",Ea,[(0,s._)("span",{class:(0,d.C_)(["play-off-team-title",{"has-text-grey-lighter":!n.bracket.thirdPlace.team_2}])},(0,d.zw)(n.bracket.thirdPlace.team_2||"Lucky guy"),3),(0,s._)("span",Na,(0,d.zw)(n.bracket.thirdPlace.team_2_score),1)])],2)):(0,s.kq)("",!0)],512)])))),128))]),2===n.bracket.stages.length?((0,s.wg)(),(0,s.iD)("div",Ua)):(0,s.kq)("",!0)]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("close-modal"))})])}var Ga={name:"Bracket",props:["bracket"],emits:["close-modal"],data(){return{isMounted:!1}},mounted(){this.isMounted=!0},computed:{stageHeight(){return this.isMounted?this.$refs.stage[0].offsetHeight:100}}};const Ka=(0,w.Z)(Ga,[["render",Ha]]);var Ya=Ka,Aa={name:"PlayOff",emits:["openResults"],components:{Bracket:Ya},data(){return{scoreError:!1,showBracket:!1}},mounted(){this.tournament.playOffBracket||this.getPlayOffBracket()},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]},playOffStageCurrent(){return"playOffStage"in this.tournament?this.tournament.playOffStage:this.tournament.playOff[0].stage},playOffBracket(){return this.tournament.playOffBracket?this.tournament.playOffBracket:null},stagesCount(){return Math.log(2*this.tournament.playOff.length)/Math.log(2)},currentPlayOffBracketIndex(){return this.tournament.playOffBracket?this.tournament.playOffBracket.stages.findIndex((e=>e.stageLabel===this.playOffStageCurrent)):"0"}},methods:{...(0,_.OI)(["finishTournament","setPlayOffBracket","setPlayOffStage"]),saveResults(){this.scoreError=!1;const e=e=>null===e.team_1_score||e.team_1_score<0||e.team_1_score>13||null===e.team_2_score||e.team_2_score<0||e.team_2_score>13;if(this.playOffBracket.stages[this.currentPlayOffBracketIndex].teams.some((t=>e(t))))return this.scoreError=!0,!1;if(2===this.playOffBracket.stages[this.currentPlayOffBracketIndex].teamsCount)this.setPlayOffStage(0),this.finishTournament();else{let e=JSON.parse(JSON.stringify(this.playOffBracket));e.stages[this.currentPlayOffBracketIndex].teams.forEach(((t,n)=>{n%2===0?(e.stages[this.currentPlayOffBracketIndex+1].teams[n/2].team_1=t.team_1_score>t.team_2_score?t.team_1:t.team_2,4===e.stages[this.currentPlayOffBracketIndex].teamsCount&&(e.thirdPlace.team_1=t.team_1_score<t.team_2_score?t.team_1:t.team_2)):(e.stages[this.currentPlayOffBracketIndex+1].teams[(n-1)/2].team_2=t.team_1_score>t.team_2_score?t.team_1:t.team_2,4===e.stages[this.currentPlayOffBracketIndex].teamsCount&&(e.thirdPlace.team_2=t.team_1_score<t.team_2_score?t.team_1:t.team_2))})),this.setPlayOffBracket(e),this.setPlayOffStage(this.playOffStageCurrent/2)}},getPlayOffBracket(){let e={stages:[],thirdPlace:{}};for(let t=this.stagesCount;t>0;t--){const n=Math.pow(2,t),a=n/2;let s=[];if(t===this.stagesCount)s=this.tournament.playOff;else for(let e=1;e<=a;e++){const e={id:t+1,stage:a,team_1:null,team_1_score:null,team_2:null,team_2_score:null};s.push(e)}const o={teamsCount:n,stageLabel:a,teams:s};e.stages.push(o)}this.setPlayOffBracket(e)}}};const $a=(0,w.Z)(Aa,[["render",ba]]);var ja=$a,La={name:"Games",components:{PlayOff:ja},props:["activeRound","teamsInGroup"],data(){return{saveDisabled:!1,scoreError:!1,compactView:!1}},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]},teamsCount(){return"swiss"===this.tournament.system?this.tournament.teams.length-1:this.teamsInGroup%2!==0?this.teamsInGroup:this.teamsInGroup-1}},methods:{...(0,_.OI)(["startRound","endRound","addRoundToGames","restoreRound","showMessage"]),getRandomWithOneExclusion(e,t=null){let n=null;while(null===n||n===t)n=Math.round(Math.random()*(e-1));return n},generateCompetitors(e,t=!1){let n,a;if(1!==this.activeRound||this.tournament.useRating){n=t?e.length-1:0;const a=1===this.activeRound?e.length/2:1;let s=t?e.length-2:a;while(e[n].opponents.includes(e[s].title))if(t?s--:s++,!e[s])return s=-1,{teamIndex:n,opponentIndex:s};return{teamIndex:n,opponentIndex:s}}return n=this.getRandomWithOneExclusion(e.length),a=this.getRandomWithOneExclusion(e.length,n),{teamIndex:n,opponentIndex:a}},drawRound(){let e,t=JSON.parse(JSON.stringify(this.tournament.teams)),n=[];if("swiss"===this.tournament.system){let a,s=0,o=Math.round(t.length/2-1),r=[];const l=t.length%2!==0;if(l){let a=this.tournament.useRating||1!==this.activeRound?t.length-1:this.getRandomWithOneExclusion(t.length),s=t[a];if(s.opponents.includes("Technical"))for(let e=2;e<t.length;e++)if(a=t.length-e,s=t[a],!s.opponents.includes("Technical"))break;e={team_1:s.title,team_1_score:13,team_2:"Technical",team_2_score:7},n.push(e),t.splice(a,1)}while(t.length>0){a=this.generateCompetitors(t,s>0);while(-1===a.opponentIndex&&s<o)s++,n.splice(n.length-1,1),t.unshift(r[r.length-1]),t.unshift(r[r.length-2]),r.splice(r.length-2,2),a=this.generateCompetitors(t,!0);if(s===o&&-1===a.opponentIndex)return this.saveDisabled=!0,void this.showMessage({title:"Can't draw this round",text:"Too mush games for swiss with this number of teams. Sorry, shit happens",type:"error"});e={team_1:t[a.teamIndex].title,team_1_score:null,team_2:t[Math.floor(a.opponentIndex)].title,team_2_score:null},r.push(t[a.teamIndex],t[Math.floor(a.opponentIndex)]);let l=[t[a.teamIndex].title,t[Math.floor(a.opponentIndex)].title];t=t.filter((e=>!l.includes(e.title))),e?n.push(e):console.log("Game is empty")}this.addRoundToGames(this.shuffleArray(n)),this.startRound()}else"groups"===this.tournament.system&&(1===this.activeRound&&this.createGroups(),this.tournament.groups&&(this.tournament.groups.forEach(((t,a)=>{const s=t.length%2!==0;for(let o=0;o<this.tournament.groupsScheme.top.length;o++)(!s||s&&this.tournament.groupsScheme.top[o]!==t.length&&this.tournament.groupsScheme.bottom[o]!==t.length)&&(e={group:a,team_1:t[this.tournament.groupsScheme.top[o]].title,team_1_score:null,team_2:t[this.tournament.groupsScheme.bottom[o]].title,team_2_score:null},n.push(e))})),this.tournament.groupsScheme.bottom.push(this.tournament.groupsScheme.top[this.tournament.groupsScheme.top.length-1]),this.tournament.groupsScheme.top.unshift(this.tournament.groupsScheme.bottom[0]),this.tournament.groupsScheme.top.splice(this.tournament.groupsScheme.top.length-1,1),this.tournament.groupsScheme.top.splice(1,1),this.tournament.groupsScheme.top.unshift(0),this.tournament.groupsScheme.bottom.splice(0,1),this.addRoundToGames(this.shuffleArray(n)),this.startRound()))},createGroups(){if(this.teamsInGroup<3)return this.showMessage({title:"Can't draw",text:"Choose correct number of teams in group",type:"error"}),!1;const e=Math.round(this.tournament.teams.length/this.teamsInGroup);let t=[];for(let o=1;o<=e;o++)t.push([]);let n=JSON.parse(JSON.stringify(this.tournament.teams));while(n.length>=1)for(let a=0;a<n.length;a++)for(let s=0;s<e;s++){const e=this.tournament.useRating?0:this.getRandomWithOneExclusion(n.length);if(-1!==e&&n.length>=1){const a=this.tournament.teams.findIndex((t=>t.title===n[e].title));t[s].push(this.tournament.teams[a]),n.splice(e,1)}}this.tournament.groups=t;let a={top:[],bottom:[]},s=[];this.tournament.groups[0].forEach(((e,t)=>{s.push(t)})),s.length%2!==0&&s.push(s.length);for(let o=0;o<s.length/2;o++)a.top.push(o);for(let o=s.length-1;o>=s.length/2;o--)a.bottom.push(o);this.tournament.groupsScheme=a},saveResults(){this.scoreError=!1;const e=e=>e.team_1_score===e.team_2_score||null===e.team_1_score||e.team_1_score<0||e.team_1_score>13||null===e.team_2_score||e.team_2_score<0||e.team_2_score>13;if(this.tournament.games[this.activeRound-1].some((t=>e(t))))return this.scoreError=!0,!1;this.saveResultsForRound(this.activeRound-1),this.endRound(),this.showMessage({title:"Success",text:"Your results saved"})},restoreRoundGames(){this.restoreRound(),this.tournament.teams.forEach((e=>{e.opponents=[],e.pointsPlus=0,e.pointsMinus=0,e.wins=0}));for(let e=0;e<this.activeRound-2;e++)this.saveResultsForRound(e)},saveResultsForRound(e){this.tournament.games[e].forEach((e=>{const t=this.tournament.teams.findIndex((t=>t.title===e.team_1));-1!=t&&(this.tournament.teams[t].opponents.push(e.team_2),this.tournament.teams[t].pointsPlus+=e.team_1_score,this.tournament.teams[t].pointsMinus+=e.team_2_score);const n=this.tournament.teams.findIndex((t=>t.title===e.team_2));-1!=n&&(this.tournament.teams[n].opponents.push(e.team_1),this.tournament.teams[n].pointsPlus+=e.team_2_score,this.tournament.teams[n].pointsMinus+=e.team_1_score),e.team_1_score>e.team_2_score?-1!=t&&this.tournament.teams[t].wins++:-1!=!n&&"Technical"!==e.team_2&&this.tournament.teams[n].wins++}))},shuffleArray(e){let t,n=e.length;while(0!=n)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];if("swiss"===this.tournament.system&&this.tournament.teams.length%2!==0){const t=e.findIndex((e=>"Technical"===e.team_2)),n=e[t];e.splice(t,1),e.push(n)}return e}}};const Va=(0,w.Z)(La,[["render",Jn]]);var Ja=Va;const Fa={class:"content tabs-content"},Za={key:0},Wa={key:0,class:"has-text-centered"},Qa={key:0},Xa={key:1},es=(0,s.Uk)(" rounds"),ts={class:"table-container"},ns={key:0,class:"table is-striped mb-5"},as={key:1},ss={class:"has-text-centered"},os={class:"table-container"},rs={class:"table is-striped"},ls={key:0},is=(0,s._)("h4",{class:"has-text-centered"},"Game for 3d Place",-1),us={class:"table-container"},ms={class:"table is-striped"},cs={key:1,class:"mb-5 mt-5"};function ds(e,t,n,a,o,r){return(0,s.wg)(),(0,s.iD)("div",Fa,[r.tournament.games.length||r.tournament.playOffBracket?((0,s.wg)(),(0,s.iD)("div",Za,[r.tournament.games.length?((0,s.wg)(),(0,s.iD)("h3",Wa,["swiss"===r.tournament.system?((0,s.wg)(),(0,s.iD)("span",Qa,"Swiss")):((0,s.wg)(),(0,s.iD)("span",Xa,"Group")),es])):(0,s.kq)("",!0),(0,s._)("div",ts,[r.tournament.games.length?((0,s.wg)(),(0,s.iD)("table",ns,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tournament.games,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,n)=>((0,s.wg)(),(0,s.iD)("tr",{key:n},[(0,s._)("td",null,"R"+(0,d.zw)(t+1),1),(0,s._)("td",null,(0,d.zw)(e.team_1),1),(0,s._)("td",null,(0,d.zw)(e.team_1_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2),1)])))),128))],64)))),128))])])):(0,s.kq)("",!0)]),r.tournament.playOffBracket?((0,s.wg)(),(0,s.iD)("div",as,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tournament.playOffBracket.stages,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"mb-5"},[(0,s._)("h3",ss,(0,d.zw)(1===e.stageLabel?"Final":"1/"+e.stageLabel+" final"),1),(0,s._)("div",os,[(0,s._)("table",rs,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.teams,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[(0,s._)("td",null,(0,d.zw)(e.team_1),1),(0,s._)("td",null,(0,d.zw)(e.team_1_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2_score),1),(0,s._)("td",null,(0,d.zw)(e.team_2),1)])))),128))])])])])))),128)),r.tournament.playOffBracket.thirdPlace&&0!==Object.keys(r.tournament.playOffBracket.thirdPlace).length?((0,s.wg)(),(0,s.iD)("div",ls,[is,(0,s._)("div",us,[(0,s._)("table",ms,[(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,(0,d.zw)(r.tournament.playOffBracket.thirdPlace.team_1),1),(0,s._)("td",null,(0,d.zw)(r.tournament.playOffBracket.thirdPlace.team_1_score),1),(0,s._)("td",null,(0,d.zw)(r.tournament.playOffBracket.thirdPlace.team_2_score),1),(0,s._)("td",null,(0,d.zw)(r.tournament.playOffBracket.thirdPlace.team_2),1)])])])])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",cs," No games, yet "))])}var hs={name:"Results",computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]}}};const ps=(0,w.Z)(hs,[["render",ds]]);var gs=ps;const _s=(0,s._)("h2",null,"Current list",-1),fs={key:0,class:"mb-5"},ws={key:0,class:"mt-5 text-center"},ys={class:"table"},vs={style:{width:"30px"}},ks={key:0,class:"is-size-7"},bs=(0,s.Uk)(" ("),Ts={key:0},Ds=(0,s.Uk)(") "),xs={key:0,class:"td-100"},Os={key:1,id:"table-list",class:"table"},Is={key:0,class:"is-size-7"},Rs=(0,s.Uk)(" ("),Cs={key:0},Ss=(0,s.Uk)(") "),zs={key:0,class:"td-100"},Ms={key:1,class:"td-50"},Ps=["onClick"];function qs(e,t,n,a,o,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[_s,"groups"===r.tournament.system&&(n.activeRound>1||r.tournament.roundIsActive)?((0,s.wg)(),(0,s.iD)("div",fs,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tournament.groups,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[r.tournament.groups.length>1?((0,s.wg)(),(0,s.iD)("h4",ws,"Group "+(0,d.zw)(r.groupsNames[t]),1)):(0,s.kq)("",!0),(0,s._)("table",ys,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:e.title},[(0,s._)("td",vs,(0,d.zw)(t+1)+".",1),(0,s._)("td",null,[(0,s.Uk)((0,d.zw)(e.title)+" ",1),e.players&&e.players.length>1?((0,s.wg)(),(0,s.iD)("div",ks,[bs,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.players,((t,n)=>((0,s.wg)(),(0,s.iD)("span",{class:"has-text-dark",key:n},[(0,s.Uk)((0,d.zw)(t.name)+" "+(0,d.zw)(t.surname),1),n<e.players.length-1?((0,s.wg)(),(0,s.iD)("span",Ts,", ")):(0,s.kq)("",!0)])))),128)),Ds])):(0,s.kq)("",!0)]),r.tournament.useRating?((0,s.wg)(),(0,s.iD)("td",xs,(0,d.zw)(e.rating),1)):(0,s.kq)("",!0)])))),128))])])))),128))])):((0,s.wg)(),(0,s.iD)("table",Os,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tournament.teams,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.title},[(0,s._)("td",null,[(0,s.Uk)((0,d.zw)(t.title)+" ",1),t.players&&t.players.length>1?((0,s.wg)(),(0,s.iD)("div",Is,[Rs,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.players,((e,n)=>((0,s.wg)(),(0,s.iD)("span",{class:"has-text-dark",key:n},[(0,s.Uk)((0,d.zw)(e.name)+" "+(0,d.zw)(e.surname),1),n<t.players.length-1?((0,s.wg)(),(0,s.iD)("span",Cs,", ")):(0,s.kq)("",!0)])))),128)),Ss])):(0,s.kq)("",!0)]),r.tournament.useRating?((0,s.wg)(),(0,s.iD)("td",zs,(0,d.zw)(t.rating),1)):(0,s.kq)("",!0),r.tournament.games.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("td",Ms,[(0,s._)("span",{class:"delete",onClick:n=>e.removeTeam(t.title)},null,8,Ps)]))])))),128))]))],64)}var Bs={name:"TeamsList",props:["activeRound"],computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]},groupsNames(){return U}},methods:{...(0,_.OI)(["removeTeam"])}};const Es=(0,w.Z)(Bs,[["render",qs]]);var Ns=Es;const Us=(0,s._)("div",{class:"is-size-4 mb-3"},"Please, enter tournament name",-1),Hs={class:"field"},Gs={class:"control"},Ks={key:0,class:"field has-text-danger"},Ys={class:"buttons is-centered"},As={class:"control"},$s={class:"control"};function js(e,t,n,o,r,l){const i=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(i,{onCloseModal:t[4]||(t[4]=t=>e.$emit("close-modal"))},{default:(0,s.w5)((()=>[Us,(0,s._)("div",Hs,[(0,s._)("div",Gs,[(0,s.wy)((0,s._)("input",{class:(0,d.C_)(["input",{"is-danger":r.hasError}]),"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),type:"text",placeholder:"Tournament name",onKeyup:t[1]||(t[1]=(0,a.D2)(((...e)=>l.saveTournament&&l.saveTournament(...e)),["enter"]))},null,34),[[a.nr,r.name]])])]),r.hasError?((0,s.wg)(),(0,s.iD)("div",Ks," It seems you already have such tournament name ")):(0,s.kq)("",!0),(0,s._)("div",Ys,[(0,s._)("div",As,[(0,s._)("button",{class:"button",onClick:t[2]||(t[2]=t=>e.$emit("close-modal"))},"Cancel")]),(0,s._)("div",$s,[(0,s._)("button",{class:"button is-success",onClick:t[3]||(t[3]=(...e)=>l.saveTournament&&l.saveTournament(...e))},"Save")])])])),_:1})}var Ls={name:"SaveTournament",components:{Modal:nt},props:["rankingTeams"],emits:["close-modal"],data(){return{name:"",hasError:!1}},created(){this.name=this.tournament.name},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex","savedTournaments"]),tournament(){return this.tournaments[this.currentTournamentIndex]},tournamentsNames(){if(this.savedTournaments.length>0){let e=[];return this.savedTournaments.forEach((t=>{e.push(t.name)})),e}return!1},tournamentRanking(){return G(this.tournament,this.rankingTeams)}},methods:{...(0,_.OI)(["addToSaved","showMessage"]),saveTournament(){if(this.hasError=!1,!this.tournament.name||this.tournamentsNames&&this.tournamentsNames.includes(this.name))this.hasError=!0;else{const e={name:this.name,system:this.tournament.system,tournamentIsFinished:this.tournament.tournamentIsFinished,games:this.tournament.games,playOff:this.tournament.playOffBracket?this.tournament.playOffBracket:null,ranking:this.tournamentRanking};this.addToSaved(e),this.$emit("close-modal"),this.showMessage({title:"Saved",text:"You can see your saved tournaments in the menu"})}}}};const Vs=(0,w.Z)(Ls,[["render",js]]);var Js=Vs;const Fs={class:"text-center mb-4 is-size-4"},Zs=(0,s.Uk)("Are you sure you want to delete "),Ws=(0,s._)("br",null,null,-1),Qs=(0,s.Uk)("?"),Xs={class:"buttons is-centered"},eo={class:"control"},to={class:"control"};function no(e,t,n,a,o,r){const l=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(l,{onCloseModal:t[2]||(t[2]=t=>e.$emit("close-modal"))},{default:(0,s.w5)((()=>[(0,s._)("p",Fs,[Zs,Ws,(0,s._)("strong",null,(0,d.zw)(r.tournament.name),1),Qs]),(0,s._)("div",Xs,[(0,s._)("div",eo,[(0,s._)("button",{class:"button",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))},"Cancel")]),(0,s._)("div",to,[(0,s._)("button",{class:"button is-danger",onClick:t[1]||(t[1]=(...e)=>r.removeCurrentTournament&&r.removeCurrentTournament(...e))},"Remove")])])])),_:1})}var ao={name:"ConfirmRemoveModal",components:{Modal:nt},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]}},methods:{...(0,_.OI)(["removeTournament"]),removeCurrentTournament(){this.removeTournament(),this.$emit("close-modal")}}};const so=(0,w.Z)(ao,[["render",no]]);var oo=so;const ro=(0,s._)("div",{class:"is-size-4 mb-3"},"Please, enter tournament name",-1),lo={class:"field"},io={class:"control"},uo={class:"buttons is-centered"},mo={class:"control"},co={class:"control"};function ho(e,t,n,o,r,l){const i=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(i,{onCloseModal:t[4]||(t[4]=t=>e.$emit("close-modal"))},{default:(0,s.w5)((()=>[ro,(0,s._)("div",lo,[(0,s._)("div",io,[(0,s.wy)((0,s._)("input",{class:(0,d.C_)(["input",{"is-danger":r.hasError}]),"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),type:"text",placeholder:"Tournament name",onKeyup:t[1]||(t[1]=(0,a.D2)(((...e)=>l.changeCurrentTournamentName&&l.changeCurrentTournamentName(...e)),["enter"]))},null,34),[[a.nr,r.name]])])]),(0,s._)("div",uo,[(0,s._)("div",mo,[(0,s._)("button",{class:"button",onClick:t[2]||(t[2]=t=>e.$emit("close-modal"))},"Cancel")]),(0,s._)("div",co,[(0,s._)("button",{class:"button is-success",onClick:t[3]||(t[3]=(...e)=>l.changeCurrentTournamentName&&l.changeCurrentTournamentName(...e))},"Change")])])])),_:1})}var po={name:"ChangeTournamentName",components:{Modal:nt},data(){return{name:"",hasError:!1}},created(){this.name=this.tournament.name},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]}},methods:{...(0,_.OI)(["changeTournamentName"]),changeCurrentTournamentName(){this.hasError=!1,""!==this.name?(this.changeTournamentName(this.name),this.$emit("close-modal")):this.hasError=!0}}};const go=(0,w.Z)(po,[["render",ho]]);var _o=go,fo={name:"Tournament",data(){return{tabs:["Teams","Games","Results","Ranking"],activeTab:"Teams",showSaveTournament:!1,teamToPlayOff:null,removeConfirm:!1,changeNameModal:!1,playB:!1,teamsInGroup:null}},created(){this.teamsInGroup=this.tournament.groups?this.tournament.groups.length:4},methods:{...(0,_.OI)(["startRound","removeTournament","setPlayOff","addBTournament","finishTournament"]),saveTournament(e){this.savedTournaments.push(e),this.showSaveTournament=!1,localStorage.setItem("tournamentsList",JSON.stringify(this.savedTournaments))},startPlayOff(){let e;if("swiss"===this.tournament.system)e=this.rankingTeams.slice(0,this.teamToPlayOff);else if(this.tournament.groups.length>1){e=[];for(let t=0;t<this.teamToPlayOff/this.tournament.groups.length;t++)this.rankingTeams.forEach((n=>e.push(n[t])))}else e=this.rankingTeams[0].slice(0,this.teamToPlayOff);let t=[],n=e.length/2;for(let a=0;a<e.length/2;a++){let s={};s=a%2===0?{id:a+1,stage:n,team_1:e[a].title,team_1_place:a+1,team_1_score:null,team_2:e[e.length-1-a].title,team_2_place:e.length-a,team_2_score:null}:{id:a+1,stage:n,team_1:e[e.length/2-a].title,team_1_place:e.length/2+1-a,team_1_score:null,team_2:e[e.length/2-1+a].title,team_2_place:e.length/2+a,team_2_score:null},t.push(s)}if(this.setPlayOff(t),this.activeTab="Games",this.playB){const e=this.rankingTeams.slice(this.teamToPlayOff,this.rankingTeams.length);e.forEach((e=>{e.wins=0,e.buhgolts=0,e.smallBuhgolts=0,e.pointsPlus=0,e.pointsMinus=0,e.opponents=[]})),this.addBTournament(e)}},sortTeams(e){this.countBuhgolts(e,"buhgolts"),this.countBuhgolts(e,"smallBuhgolts");const t=e.sort(((e,t)=>t.wins-e.wins||t.buhgolts-e.buhgolts||t.smallBuhgolts-e.smallBuhgolts||t.pointsPlus-t.pointsMinus-(e.pointsPlus-e.pointsMinus)||t.rating-e.rating));return t},countBuhgolts(e,t){const n="buhgolts"===t?"wins":"buhgolts";return e.forEach((a=>{let s=0;a.opponents.length&&a.opponents.forEach((t=>{const a=e.findIndex((e=>e.title===t));-1!==a&&(s+=e[a][n])})),a[t]=s})),e}},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]},canSaveTournament(){return this.tournament.tournamentIsFinished&&this.tournament.games&&this.tournament.games.length>1||this.tournament.playoff&&null!==this.tournament.playoff[this.tournament.playoff.length-1].teams[0].team_1_score},rankingTeams(){if("groups"===this.tournament.system&&this.activeRound>1){let e=[];return this.tournament.groups.forEach((t=>{t.forEach((e=>{let n=0;e.opponents.forEach((a=>{const s=t.findIndex((e=>e.title===a));e.wins===t[s].wins&&(n+=H(this.tournament.games,e.title,t[s].title,!0))})),e.directPoints=n}));let n=t.slice().sort(((e,t)=>t.wins-e.wins||t.directPoints-e.directPoints||t.pointsPlus-t.pointsMinus-(e.pointsPlus-e.pointsMinus)));e.push(n)})),e}return this.sortTeams(this.tournament.teams)},activeRound(){return this.tournament.games.length?this.tournament.roundIsActive?this.tournament.games.length:this.tournament.games.length+1:1}},components:{ChangeTournamentName:_o,ConfirmRemoveModal:oo,TeamsList:Ns,AddTeam:gn,Games:Ja,Results:gs,Ranking:Fe,SaveTournament:Js}};const wo=(0,w.Z)(fo,[["render",Ft]]);var yo=wo,vo=n.p+"img/logo.6a11ce3e.webp",ko=n.p+"img/logo.74972a48.png";const bo=vo,To=ko,Do={class:"navbar",role:"navigation","aria-label":"main navigation"},xo={class:"navbar-brand"},Oo=(0,s._)("a",{class:"navbar-item",href:"/"},[(0,s._)("picture",null,[(0,s._)("source",{srcset:bo,type:"image/webp"}),(0,s._)("source",{srcset:To,type:"image/jpeg"}),(0,s._)("img",{src:ko,alt:"logo"})])],-1),Io=(0,s._)("span",{"aria-hidden":"true"},null,-1),Ro=(0,s._)("span",{"aria-hidden":"true"},null,-1),Co=(0,s._)("span",{"aria-hidden":"true"},null,-1),So=[Io,Ro,Co],zo={id:"navbarBasicExample",class:"navbar-menu"},Mo={class:"navbar-start"},Po={key:0,class:"navbar-item has-dropdown is-hoverable"},qo=(0,s._)("a",{class:"navbar-link"}," Active tournaments ",-1),Bo={key:0,class:"navbar-dropdown"},Eo=["onClick"],No=(0,s._)("div",{class:"navbar-end"},[(0,s._)("div",{class:"navbar-item"},[(0,s._)("div",{class:"buttons"},[(0,s._)("a",{class:"button is-light"}," Log in ")])])],-1);function Uo(e,t,n,o,r,l){return(0,s.wg)(),(0,s.iD)("nav",Do,[(0,s._)("div",xo,[Oo,(0,s._)("a",{role:"button",class:"navbar-burger",onClick:t[0]||(t[0]=t=>e.$emit("open-menu")),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},So)]),(0,s._)("div",zo,[(0,s._)("div",Mo,[(0,s._)("a",{class:"navbar-item",onClick:t[1]||(t[1]=t=>e.$emit("open-menu"))}," Menu "),e.tournaments.length>1?((0,s.wg)(),(0,s.iD)("div",Po,[qo,e.tournaments.length>1?((0,s.wg)(),(0,s.iD)("div",Bo,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tournaments,((t,n)=>((0,s.wg)(),(0,s.iD)("a",{class:(0,d.C_)(["navbar-item",{"is-active":n===e.currentTournamentIndex}]),key:n,onClick:(0,a.iM)((t=>e.setActiveTournament(n)),["prevent"])},(0,d.zw)(t.name),11,Eo)))),128))])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)]),No])])}var Ho={name:"Navbar",computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]}},methods:{...(0,_.OI)(["setActiveTournament"])}};const Go=(0,w.Z)(Ho,[["render",Uo]]);var Ko=Go;const Yo={class:"content"},Ao=(0,s._)("h3",null,"Some notes",-1),$o=(0,s._)("ol",null,[(0,s._)("li",null,"To change tournament name just click on its default name."),(0,s._)("li",null,"In swiss system you can modify previous round result if you wrote it not correct. This possibility available when you already draw next round.")],-1),jo={class:"buttons is-centered"},Lo={class:"control"};function Vo(e,t,n,a,o,r){const l=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(l,{onCloseModal:t[1]||(t[1]=t=>e.$emit("close-modal"))},{default:(0,s.w5)((()=>[(0,s._)("div",Yo,[Ao,$o,(0,s._)("div",jo,[(0,s._)("div",Lo,[(0,s._)("button",{class:"button",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))},"Close")])])])])),_:1})}var Jo={name:"Help",components:{Modal:nt},computed:{...(0,_.rn)(["tournaments","currentTournamentIndex"]),tournament(){return this.tournaments[this.currentTournamentIndex]}},methods:{...(0,_.OI)(["removeTournament"]),removeCurrentTournament(){this.removeTournament(),this.$emit("close-modal")}}};const Fo=(0,w.Z)(Jo,[["render",Vo]]);var Zo=Fo,Wo={name:"App",data(){return{showSaveTournament:!1,menuOpen:!1,showSavedTournament:!1,helpOpen:!1,savedTournamentsActive:!1}},mounted(){this.setActiveTournament(0)},methods:{...(0,_.OI)(["setActiveTournament","addTournament"]),openSavedTournament(e){this.savedTournamentsActive=e,this.menuOpen=!1,this.openTournamentModal()},openTournamentModal(){this.showSavedTournament=!0,document.querySelector("html").classList.add("is-clipped")},closeTournamentModal(){this.showSavedTournament=!1,document.querySelector("html").classList.remove("is-clipped")}},computed:{...(0,_.rn)(["message","tournaments","currentTournamentIndex","savedTournaments"]),tournament(){return this.tournaments[this.currentTournamentIndex]},canSaveTournament(){return this.games&&this.games.length>0||this.playoff&&null!==this.playoff[this.playoff.length-1].teams[0].team_1_score}},components:{Help:Zo,Navbar:Ko,Tournament:yo,SavedTournamentModal:ot,Menu:A,Message:v}};const Qo=(0,w.Z)(Wo,[["render",c]]);var Xo=Qo;const er={name:"Tournament A",games:[],gamesCopy:[],teams:[],system:"swiss",roundIsActive:!1,useRating:!1,isPlayOff:!1,playoff:!1,tournamentIsFinished:!1},tr=(0,_.MT)({state(){return{tournaments:localStorage.getItem("tournaments")?JSON.parse(localStorage.getItem("tournaments")):[JSON.parse(JSON.stringify(er))],message:{show:!1,type:"success",title:"Message",text:""},savedTournaments:localStorage.getItem("tournamentsList")?JSON.parse(localStorage.getItem("tournamentsList")):[],currentTournamentIndex:null}},mutations:{setActiveTournament(e,t){e.currentTournamentIndex=t},changeTournamentName(e,t){e.tournaments[e.currentTournamentIndex].name=t},removeTournament(e){e.tournaments.length>1?(e.tournaments.splice(e.currentTournamentIndex,1),e.currentTournamentIndex=0):e.tournaments[e.currentTournamentIndex]=JSON.parse(JSON.stringify(er))},addTeamToStore(e,t){e.tournaments[e.currentTournamentIndex].teams.push(t)},removeTeam(e,t){e.tournaments[e.currentTournamentIndex].teams=e.tournaments[e.currentTournamentIndex].teams.filter((e=>e.title!==t))},changeDrawType(e,t){e.tournaments[e.currentTournamentIndex].useRating=t},startRound(e){e.tournaments[e.currentTournamentIndex].roundIsActive=!0},endRound(e){e.tournaments[e.currentTournamentIndex].roundIsActive=!1},addRoundToGames(e,t){e.tournaments[e.currentTournamentIndex].games.push(t),e.tournaments[e.currentTournamentIndex].gamesCopy.push(t),e.tournaments[e.currentTournamentIndex].roundIsActive=!0},restoreRound(e){e.tournaments[e.currentTournamentIndex].games.pop(),e.tournaments[e.currentTournamentIndex].teams.forEach((e=>e.opponents.pop()))},setPlayOff(e,t){e.tournaments[e.currentTournamentIndex].playOff=t},setPlayOffBracket(e,t){e.tournaments[e.currentTournamentIndex].playOffBracket=t},setPlayOffStage(e,t){e.tournaments[e.currentTournamentIndex].playOffStage=t},finishTournament(e){e.tournaments[e.currentTournamentIndex].tournamentIsFinished=!0},showMessage(e,{title:t,text:n,type:a="success"}){e.message={show:!0,title:t,text:n,type:a}},hideMessage(e){e.message.show=!1},addTournament(e){e.tournaments.push(JSON.parse(JSON.stringify(er))),e.currentTournamentIndex=e.tournaments.length-1,tr.commit("changeTournamentName",`Tournament ${U[e.tournaments.length-1]}`)},addToSaved(e,t){e.savedTournaments.push(t)},removeSavedTournament(e,t){e.savedTournaments=e.savedTournaments.filter((e=>e.name!==t))},addBTournament(e,t){tr.commit("addTournament"),e.tournaments[e.currentTournamentIndex].teams=t}}});tr.subscribe(((e,t)=>{localStorage.setItem("tournaments",JSON.stringify(t.tournaments)),localStorage.setItem("tournamentsList",JSON.stringify(t.savedTournaments))})),(0,a.ri)(Xo).use(tr).mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,s,o){if(!a){var r=1/0;for(m=0;m<e.length;m++){a=e[m][0],s=e[m][1],o=e[m][2];for(var l=!0,i=0;i<a.length;i++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(l=!1,o<r&&(r=o));if(l){e.splice(m--,1);var u=s();void 0!==u&&(t=u)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[a,s,o]}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/petanque-swiss-vue/dist/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,o,r=a[0],l=a[1],i=a[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(i)var m=i(n)}for(t&&t(a);u<r.length;u++)o=r[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(m)},a=self["webpackChunkpetanque_draw"]=self["webpackChunkpetanque_draw"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(391)}));a=n.O(a)})();
//# sourceMappingURL=app.6332822a.js.map