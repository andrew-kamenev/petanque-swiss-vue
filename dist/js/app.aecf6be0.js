(function(e){function t(t){for(var s,o,l=t[0],i=t[1],r=t[2],b=0,m=[];b<l.length;b++)o=l[b],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&m.push(c[o][0]),c[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,r||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,l=1;l<n.length;l++){var i=n[l];0!==c[i]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},c={app:0},a=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/petanque-swiss-vue/dist/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var r=0;r<l.length;r++)t(l[r]);var u=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1542:function(e,t,n){"use strict";n("d529")},"1c50":function(e,t,n){},3815:function(e,t,n){"use strict";n("51f9")},"51f9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("7a23"),c=n("d1b4"),a=n.n(c),o={class:"container"},l=Object(s["f"])("h1",{class:"title is-1 text-center"},[Object(s["g"])("Petanque - swiss system "),Object(s["f"])("sup",null,"Version Alpha")],-1),i={class:"columns"},r={class:"column"},u={class:"tabs"},b=["onClick"],m={href:"#"},d={key:0,class:"content tabs-content"},f={key:1},O={key:2,class:"table"},j={class:"td-100"},p={key:0,class:"td-50"},g=["onClick"],h={key:3,class:"mb-5 mt-5"},v={class:"field is-grouped"},y={class:"control"},_={class:"control"},T={key:1,class:"content tabs-content"},k={class:"field is-grouped"},w={class:"control"},x={key:0},I={class:"text-center"},R={class:"text-right"},S={for:""},M={class:"text-center lh-40 score-block"},P=["onUpdate:modelValue","disabled"],C=Object(s["g"])(" vs "),A=["onUpdate:modelValue","disabled"],B={for:""},J={class:"text-center"},N={key:1,class:"mb-5 mt-5"},q={key:0},V={key:1},U=Object(s["g"])("Please, click on button to draw "),E=Object(s["g"])(" round"),L={key:2,class:"content tabs-content"},G={key:0,class:"table"},K={key:1,class:"mb-5 mt-5"},D={key:3,class:"content tabs-content"},$={class:"table"},F=Object(s["f"])("thead",null,[Object(s["f"])("tr",null,[Object(s["f"])("th",null,"#"),Object(s["f"])("th",null,"Wins"),Object(s["f"])("th",null,"Buh"),Object(s["f"])("th",null,"Sm Buh"),Object(s["f"])("th",null,"Points"),Object(s["f"])("th",null,"Rating")])],-1),H=Object(s["f"])("div",{class:"column is-one-third"},[Object(s["f"])("img",{src:a.a,alt:"Petanque in Alps",class:"image"})],-1);function W(e,t,n,c,a,W){var Y=Object(s["m"])("AddTeam"),z=Object(s["m"])("Message");return Object(s["i"])(),Object(s["e"])("div",o,[l,Object(s["f"])("div",i,[Object(s["f"])("div",r,[Object(s["f"])("div",u,[Object(s["f"])("ul",null,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(a.tabs,(function(e,t){return Object(s["i"])(),Object(s["e"])("li",{key:t,onClick:function(t){return a.activeTab=e},class:Object(s["h"])({"is-active":e===a.activeTab})},[Object(s["f"])("a",m,Object(s["n"])(e),1)],10,b)})),128))])]),"Teams"===a.activeTab?(Object(s["i"])(),Object(s["e"])("div",d,[a.games.length?Object(s["d"])("",!0):(Object(s["i"])(),Object(s["c"])(Y,{key:0,onAddteam:W.addTeam},null,8,["onAddteam"])),a.teams.length?(Object(s["i"])(),Object(s["e"])("h2",f,"Current list")):Object(s["d"])("",!0),a.teams.length?(Object(s["i"])(),Object(s["e"])("table",O,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(a.teams,(function(e){return Object(s["i"])(),Object(s["e"])("tr",{key:e.title},[Object(s["f"])("td",null,Object(s["n"])(e.title),1),Object(s["f"])("td",j,Object(s["n"])(e.rating),1),a.games.length?Object(s["d"])("",!0):(Object(s["i"])(),Object(s["e"])("td",p,[Object(s["f"])("span",{class:"delete",onClick:function(t){return W.removeTeam(e.title)}},null,8,g)]))])})),128))])):(Object(s["i"])(),Object(s["e"])("div",h," Please, add team ")),Object(s["f"])("div",v,[Object(s["f"])("div",y,[Object(s["f"])("button",{class:"button is-danger",onClick:t[0]||(t[0]=function(){return W.removeTournament&&W.removeTournament.apply(W,arguments)})},"Remove tournament")]),Object(s["f"])("div",_,[Object(s["f"])("button",{class:"button is-success",onClick:t[1]||(t[1]=function(){return e.saveTournament&&e.saveTournament.apply(e,arguments)})},"Save tournament")])])])):Object(s["d"])("",!0),"Games"===a.activeTab?(Object(s["i"])(),Object(s["e"])("div",T,[Object(s["f"])("div",k,[Object(s["f"])("div",w,[a.roundIsActive?Object(s["d"])("",!0):(Object(s["i"])(),Object(s["e"])("button",{key:0,class:"button is-info",onClick:t[2]||(t[2]=function(){return W.drawRound&&W.drawRound.apply(W,arguments)})},Object(s["n"])(0===W.activeRound?"First":"Draw ".concat(W.activeRound))+" Round",1))])]),a.games.length&&a.roundIsActive?(Object(s["i"])(),Object(s["e"])("div",x,[Object(s["f"])("h2",I,"Round "+Object(s["n"])(W.activeRound-1),1),(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(a.games[W.activeRound-2],(function(e,t){return Object(s["i"])(),Object(s["e"])("div",{class:"game-row",key:t},[Object(s["f"])("span",R,[Object(s["f"])("label",S,Object(s["n"])(e.team_1),1)]),Object(s["f"])("span",M,[Object(s["p"])(Object(s["f"])("input",{"onUpdate:modelValue":function(t){return e.team_1_score=t},class:"input -small",type:"number",disabled:"Technical"===e.team_2},null,8,P),[[s["o"],e.team_1_score]]),C,Object(s["p"])(Object(s["f"])("input",{"onUpdate:modelValue":function(t){return e.team_2_score=t},class:"input -small",type:"number",disabled:"Technical"===e.team_2},null,8,A),[[s["o"],e.team_2_score]])]),Object(s["f"])("span",null,[Object(s["f"])("label",B,Object(s["n"])(e.team_2),1)])])})),128)),Object(s["f"])("div",J,[Object(s["f"])("button",{class:"button is-success",onClick:t[3]||(t[3]=function(){return W.saveResults&&W.saveResults.apply(W,arguments)})},"Save results")])])):(Object(s["i"])(),Object(s["e"])("div",N,[a.games.length>=a.teams.length-1?(Object(s["i"])(),Object(s["e"])("p",q,"Rounds quantity can't be more than teams")):(Object(s["i"])(),Object(s["e"])("p",V,[U,Object(s["f"])("b",null,Object(s["n"])(0===W.activeRound?"first":W.activeRound),1),E]))]))])):Object(s["d"])("",!0),"Results"===a.activeTab?(Object(s["i"])(),Object(s["e"])("div",L,[a.games.length?(Object(s["i"])(),Object(s["e"])("table",G,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(a.games,(function(e,t){return Object(s["i"])(),Object(s["e"])(s["a"],{key:t},[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(e,(function(e,n){return Object(s["i"])(),Object(s["e"])("tr",{key:n},[Object(s["f"])("td",null,"R"+Object(s["n"])(t+1),1),Object(s["f"])("td",null,Object(s["n"])(e.team_1),1),Object(s["f"])("td",null,Object(s["n"])(e.team_1_score),1),Object(s["f"])("td",null,Object(s["n"])(e.team_2_score),1),Object(s["f"])("td",null,Object(s["n"])(e.team_2),1)])})),128))],64)})),128))])):(Object(s["i"])(),Object(s["e"])("div",K," No games, yet "))])):Object(s["d"])("",!0),"Ranking"===a.activeTab?(Object(s["i"])(),Object(s["e"])("div",D,[Object(s["f"])("table",$,[F,Object(s["f"])("tbody",null,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(W.rankingTeams,(function(e){return Object(s["i"])(),Object(s["e"])("tr",{key:e.title},[Object(s["f"])("td",null,Object(s["n"])(e.title),1),Object(s["f"])("td",null,Object(s["n"])(e.wins),1),Object(s["f"])("td",null,Object(s["n"])(e.buhgolts),1),Object(s["f"])("td",null,Object(s["n"])(e.smallBuhgolts),1),Object(s["f"])("td",null,Object(s["n"])(e.pointsPlus)+":"+Object(s["n"])(e.pointsMinus),1),Object(s["f"])("td",null,Object(s["n"])(e.rating),1)])})),128))])])])):Object(s["d"])("",!0)]),H]),a.message.show?(Object(s["i"])(),Object(s["c"])(z,{key:0,type:a.message.type,title:a.message.title,text:a.message.text,onClosemessage:t[4]||(t[4]=function(e){return a.message.show=!1})},null,8,["type","title","text"])):Object(s["d"])("",!0)])}var Y=n("53ca"),z=n("2909"),Q=(n("d3b7"),n("159b"),n("c740"),n("e9c4"),n("caad"),n("2532"),n("a434"),n("4de4"),n("4e82"),{class:"field is-grouped"}),X={class:"control"},Z={class:"control"},ee={class:"field is-grouped"},te={class:"control"},ne={class:"control"},se={class:"control"};function ce(e,t,n,c,a,o){return Object(s["i"])(),Object(s["e"])(s["a"],null,[Object(s["f"])("div",Q,[Object(s["f"])("div",X,[Object(s["p"])(Object(s["f"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.tournamentId=e}),onKeydown:t[1]||(t[1]=Object(s["q"])((function(){return o.importList&&o.importList.apply(o,arguments)}),["enter"])),class:"input",type:"number",placeholder:"Tournament ID"},null,544),[[s["o"],a.tournamentId]])]),Object(s["f"])("div",Z,[Object(s["f"])("button",{class:"button is-success",onClick:t[2]||(t[2]=function(){return o.importList&&o.importList.apply(o,arguments)})},"Import from portal")])]),Object(s["f"])("div",ee,[Object(s["f"])("div",te,[Object(s["p"])(Object(s["f"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.teamTitle=e}),onKeyup:t[4]||(t[4]=Object(s["q"])((function(e){return o.addTeam(a.teamTitle,a.teamRating)}),["enter"])),class:"input",type:"text",placeholder:"Team title"},null,544),[[s["o"],a.teamTitle]])]),Object(s["f"])("div",ne,[Object(s["p"])(Object(s["f"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.teamRating=e}),onKeyup:t[6]||(t[6]=Object(s["q"])((function(e){return o.addTeam(a.teamTitle,a.teamRating)}),["enter"])),class:"input -rating",type:"number",id:"rating",placeholder:"Rating"},null,544),[[s["o"],a.teamRating]])]),Object(s["f"])("div",se,[Object(s["f"])("button",{class:"button",onClick:t[7]||(t[7]=function(e){return o.addTeam(a.teamTitle,a.teamRating)})},"Add team")])])],64)}var ae=n("1da1"),oe=(n("96cf"),n("b0c0"),{name:"AddTeam",data:function(){return{teamTitle:null,teamRating:null,tournamentId:null}},methods:{addTeam:function(e,t){this.$emit("addteam",e,t||0),this.teamTitle=null,this.teamRating=null},importList:function(){var e=this;return Object(ae["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://portal.petanque.org.ua/tournament/team_export/".concat(e.tournamentId,"?format=json"));case 2:if(n=t.sent,!n.ok){t.next=11;break}return t.next=6,n.json();case 6:s=t.sent,console.log(s),s.teams.forEach((function(t){console.log(t),e.addTeam(t.name,+t.power)})),t.next=12;break;case 11:alert("Ошибка HTTP: "+n.status);case 12:case"end":return t.stop()}}),t)})))()}}}),le=n("6b0d"),ie=n.n(le);const re=ie()(oe,[["render",ce]]);var ue=re,be={class:"message-header"},me={class:"message-body"};function de(e,t,n,c,a,o){return Object(s["i"])(),Object(s["e"])("article",{class:Object(s["h"])(["message is-success",{"is-danger":"error"===n.type}])},[Object(s["f"])("div",be,[Object(s["f"])("p",null,Object(s["n"])(n.title),1),Object(s["f"])("button",{class:"delete","aria-label":"delete",onClick:t[0]||(t[0]=function(){return o.closeMessage&&o.closeMessage.apply(o,arguments)})})]),Object(s["f"])("div",me,Object(s["n"])(n.text),1)],2)}var fe={name:"Message",props:["type","title","text"],mounted:function(){setTimeout(this.closeMessage,3e3)},methods:{closeMessage:function(){this.$emit("closemessage")}}};n("1542");const Oe=ie()(fe,[["render",de],["__scopeId","data-v-0b9e1740"]]);var je=Oe,pe={name:"App",data:function(){return{tabs:["Teams","Games","Results","Ranking","Tournaments"],activeTab:"Teams",teams:localStorage.getItem("teams")?JSON.parse(localStorage.getItem("teams")):[],games:localStorage.getItem("games")?JSON.parse(localStorage.getItem("games")):[],roundIsActive:!1,message:{show:!1,type:"success",title:"Message",text:""}}},mounted:function(){},methods:{saveResults:function(){var e=this;this.games[this.activeRound-2].forEach((function(t){var n=e.teams.findIndex((function(e){return e.title===t.team_1}));-1!=n&&(e.teams[n].opponents.push(t.team_2),e.teams[n].pointsPlus+=t.team_1_score,e.teams[n].pointsMinus+=t.team_2_score);var s=e.teams.findIndex((function(e){return e.title===t.team_2}));-1!=s&&(e.teams[s].opponents.push(t.team_1),e.teams[s].pointsPlus+=t.team_2_score,e.teams[s].pointsMinus+=t.team_1_score),t.team_1_score>t.team_2_score?-1!=n&&(console.log(e.teams[n],n),e.teams[n].wins++):-1!=!s&&"Technical"!==t.team_2&&e.teams[s].wins++})),localStorage.setItem("teams",JSON.stringify(this.teams)),localStorage.setItem("games",JSON.stringify(this.games)),this.roundIsActive=!1,this.showMessage("Success","Your results saved")},showMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";this.message={show:!0,type:n,title:e,text:t}},generateCompetitors:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?e.length-1:0,s=0===this.activeRound?e.length/2:1,c=t?e.length-2:s;while(e[n].opponents.includes(e[c].title))if(t?c--:c++,!e[c])return c=-1,{teamIndex:n,opponentIndex:c};return console.log(c),{teamIndex:n,opponentIndex:c}},drawRound:function(){var e=this;this.roundIsActive=!0;var t,n,s=[],c=Object(z["a"])(this.rankingTeams),a=0,o=c.length/2-1,l=[],i=c.length%2!==0,r=i?c[c.length-1]:null;if(i){if(r.opponents.includes("Technical"))for(var u=2;u<c.length;u++)if(console.log(123),r=c[c.length-u],!r.opponents.includes("Technical")){console.log(r);break}console.log(r),n={team_1:r.title,team_1_score:13,team_2:"Technical",team_2_score:7},console.log(n),s.push(n),c.splice(c.length-1,1)}var b=function(){t=e.generateCompetitors(c,a>0);while(-1===t.opponentIndex&&a<o){if(a++,s.splice(s.length-1,1),!l.length)return e.showMessage("Error","Sorry, shit happens"),{v:void 0};c.unshift(l[l.length-1]),c.unshift(l[l.length-2]),l.splice(l.length-2,2),t=e.generateCompetitors(c,!0)}n={team_1:c[t.teamIndex].title,team_1_score:null,team_2:c[Math.floor(t.opponentIndex)].title,team_2_score:null},l.push(c[t.teamIndex],c[Math.floor(t.opponentIndex)]);var i=[c[t.teamIndex].title,c[Math.floor(t.opponentIndex)].title];c=c.filter((function(e){return!i.includes(e.title)})),n?s.push(n):console.log("Game is empty")};while(c.length>0){var m=b();if("object"===Object(Y["a"])(m))return m.v}this.games.push(s)},sortTeams:function(e){this.countBuhgolts(e,"buhgolts"),this.countBuhgolts(e,"smallBuhgolts");var t=e.sort((function(e,t){return t.wins-e.wins||t.buhgolts-e.buhgolts||t.smallBuhgolts-e.smallBuhgolts||t.pointsPlus-t.pointsMinus-(e.pointsPlus-e.pointsMinus)||t.rating-e.rating}));return localStorage.setItem("teams",JSON.stringify(t)),t},countBuhgolts:function(e,t){var n="buhgolts"===t?"wins":"buhgolts";return e.forEach((function(s){var c=0;s.opponents.length&&s.opponents.forEach((function(t){var s=e.findIndex((function(e){return e.title===t}));-1!==s&&(c+=e[s][n])})),s[t]=c})),e},addTeam:function(e,t){var n={title:e,rating:t,wins:0,buhgolts:0,smallBuhgolts:0,pointsPlus:0,pointsMinus:0,opponents:[]};this.teams.push(n),localStorage.setItem("teams",JSON.stringify(this.teams))},removeTeam:function(e){this.teams=this.teams.filter((function(t){return t.title!==e})),localStorage.setItem("teams",JSON.stringify(this.teams))},removeTournament:function(){this.teams=[],localStorage.removeItem("teams"),this.games=[],localStorage.removeItem("games")}},computed:{rankingTeams:function(){return this.sortTeams(this.teams)},activeRound:function(){return this.games.length?this.games.length+1:0}},watch:{teams:function(){localStorage.setItem("teams",JSON.stringify(this.teams))}},components:{AddTeam:ue,Message:je}};n("3815"),n("d73d");const ge=ie()(pe,[["render",W]]);var he=ge;Object(s["b"])(he).mount("#app")},d1b4:function(e,t,n){e.exports=n.p+"img/bg.be042820.jpg"},d529:function(e,t,n){},d73d:function(e,t,n){"use strict";n("1c50")}});
//# sourceMappingURL=app.aecf6be0.js.map